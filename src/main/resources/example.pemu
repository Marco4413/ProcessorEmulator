
JMP start

str: #DS "Hello World!\n\0"
str_ptr: #DW str

#DA { _temp: 0 null: 0 }

_print_char: #DW 0
f_print:
    POP _temp
    POP _print_str_ptr
    PUSH _temp

    _f_print_char:
    MOV _print_char _print_str_ptr: 0

    CMP _print_char null
    JZ _f_print_end

    OUTC _print_char
    INC _print_str_ptr

    JMP _f_print_char

    _f_print_end:
    RET

start:
    PUSH str_ptr
    CALL f_print
    HLT
